!function(a,b){"undefined"!=typeof module?module.exports=b(a):(b(a),"function"==typeof define&&(define.amd||define.cmd)&&define("area",function(){return b(a)}))}(window||this,function(a){var b,c,d,e,g,h,i,j,k,l,m,n,q,r,s,t,u,v,w,x,y,z,A,B,C,D;return!a.CY&&(a.CY={}),a.CY.area?a.CY.area:(window.requestAnimationFrame||(b=0,window.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16.7-(c-b)),e=window.setTimeout(function(){a(c+d)},d);return b=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),c=document,d=function(a){return Object.prototype.toString.call(a).split(/\s(\w+)/)[1].toLowerCase()},e=function(a,b){return a&&a instanceof Object?a:a?(b||document).querySelector(a):null},g=function(a,b){a=a||[];for(var c=0,d=a.length;d>c&&0!=b.call(a[c],c,a[c]);c++);},h=[],i="0",j=function(a,b,c){g("array"!=d(a)?[a]:a,function(a,d){b.split(" ").forEach(function(a){d.addEventListener(a,c,{passive:!1}),h.push({elem:d,type:a,KENID:i,handle:c})})})},k=function(a,b,c){b.split(" ").forEach(function(b){a.removeEventListener(b,c)})},l=function(a,b){for(var c in b)b.hasOwnProperty(c)&&("object"!=d(b[c])?void 0!=b[c]&&(a[c]=b[c]):a[c]=l(a[c]||{},b[c]));return a},m=function(a,b){a=c.createElement(a);for(var d in b)b.hasOwnProperty(d)&&("style"==d?l(a.style,b[d]):a[d]=b[d]);return a},n=function(b,c){return a.getComputedStyle?a.getComputedStyle(b,null)[c]:b.currentStyle[c]},q=function(a){l(a.style,{display:"block"})},r=function(a){l(a.style,{display:"none"})},s=function(a,b){return b&&"object"==d(b)?a.replace(/\{([^{}]+)\}/g,function(a,c){var d=b[c];return void 0!==d?""+d:""}):a.toString()},u=[],v=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},w=function(a,b,c,d){return c*a/d+b},x=function(a){for(var b=u.length-1;b>=0;b--)u[b].elem==a&&(u[b].callback(),u.splice(b,1))},y=function(a,b,c,d,e,f,g){var o,p,h=window.getComputedStyle(a,null),i=parseInt(h.getPropertyValue(b.replace(/([A-Z])/g,"-$1").toLowerCase()))||0,j=0,k=d||500,l=+new Date,m=Math.abs(i-c),n=c>i?!0:!1,q="px",r=function(c){return k>j&&!c?(j=+new Date-l,o=f?w(j,0,m,k):v(j,0,m,k),p=n?i+o:i-o,a.style[b]=p+q,g&&g(p),void 0):(p=n?i+m:i-m,a.style[b]=p+q,g&&g(p),e&&e(),!0)};return r.elem=a,r.callback=function(){return e&&e(),!0},u&&u.length?u.push(r):(u=[r],cancelAnimationFrame(t),t=requestAnimationFrame(function s(){for(var a=u.length-1;a>=0;a--)u[a]()&&u.splice(a,1);u.length>0&&(t=requestAnimationFrame(s))}),void 0)},z=function(a){var b,d,e,f,h,i,k,l,m,n,o,p,q,r,s;return a=a||{},b=/Android|webOS|iphone|ipod|ipad|BlackBerry/i.test(navigator.userAgent),d="mousedown",e="mousemove",f="mouseup",h="mousewheel DOMMouseScroll",b&&(d="touchstart",e="touchmove",f="touchend"),i=[],k=[],l=[],m={startX:0,startY:0,endX:0,endY:0,startTime:0,endTime:0},n=function(){return b?function(a,b){return a.changedTouches[0]["page"+b]}:function(a,b){return a["page"+b]}}(),o=function(){return+new Date},j(c,d,function(b){if(a.isActivated){var c=!1;g(i,function(a,d){return c=0==d(b,m)?!1:!0,!!c}),m.isStart=c,m.isStart&&(m.startTime=o(),m.startX=n(b,"X"),m.startY=n(b,"Y"))}}),j(c,e,function(b){a.isActivated&&(a.isLockfull&&b.preventDefault(),m.isStart&&(m.endX=n(b,"X"),m.endY=n(b,"Y"),g(k,function(a,c){c(b,m)})))}),j(c,f,function(a){m.isStart&&(m.endTime=o(),m.endX=n(a,"X"),m.endY=n(a,"Y"),g(l,function(b,c){c(a,m)}),m.isStart=!1)}),q=25,r=0,s=0,h&&j(c,h,function(b){var c,d,e;a.isActivated&&(0==r&&(c=!1,g(i,function(a,d){return c=0==d(b,m)?!1:!0,!!c}),m.isStart=c),m.isStart&&(d=null,d=b.wheelDelta?b.wheelDelta:40*-b.detail,d=d>0?q:-q,e=d>0?q-1:-q+1,r+=d,s+=e,m.startX=0,m.startY=0,m.endX=s,m.endY=r,d>0?(m.startTime=0,m.endTime=5e5):(m.startTime=0,m.endTime=5e5),g(k,function(a,c){c(b,m,d)}),clearTimeout(p),p=setTimeout(function(){g(l,function(a,c){c(b,m,d)}),s=0,r=0,m.isStart=!1},100)))}),{setLockfull:function(b){a.isLockfull=!!b},setActivated:function(b){a.isActivated=!!b},addStartHooks:function(a){i.push(a)},addMoveHooks:function(a){k.push(a)},addStopHooks:function(a){l.push(a)}}},A=function(){var b,a=[];a.push(".areaBox{height:232px;position:fixed;left:0;right:0;bottom:0;z-index:999;background-color:#eee;border-top:solid 1px #ccc;box-shadow:0px -3px 5px 0px rgba(0,0,0,0.1)}"),a.push(".areaBox .l-head{overflow:hidden;padding:6px 10px;background-color:#eee;border-bottom:solid 1px #ddd}"),a.push(".areaBox .l-head .l-cancel,.areaBox .l-head .l-submit{text-align:center;white-space:nowrap;color:#333;border:1px solid #ccc;border-radius:6px;display:inline-block;padding:3px 10px;font-size:12px}"),a.push(".areaBox .l-head .l-cancel{float:left;background-color:#fff}"),a.push(".areaBox .l-head .l-submit{float:right;border:#d3b669;color:#fff;background:#d3b669}"),a.push(".areaBox .l-body{position:absolute;width:100%;left:0;right:0;top:42px;bottom:0}"),a.push('.areaBox .l-body:before{position:absolute;content:" ";border-top:1px solid rgba(0,0,0,0.1);left:0;right:0;height:1px;top:76px}'),a.push('.areaBox .l-body:after{position:absolute;content:" ";background-color:rgba(0,0,0,0.1);left:0;right:0;height:1px;top:114px}'),a.push(".areaBox .l-items{height:38px;line-height:38px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"),a.push(".areaBox .itemBox{float:left;width:33%;height:100%;position:relative;transition:width 0.5s}"),b=c.createElement("style"),b.type="text/css",b.innerHTML=a.join(""),c.getElementsByTagName("head")[0].appendChild(b),A=function(){}},B=function(a){var b,d,f,o,p,q,r,s,t,u,v,w,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q;return this instanceof B?(this._KENID=Math.random(),i=this._KENID,a=l({elem:"",content:"",time:600,drag:.4,springDrag:.85,itemHeight:0,isSpring:!0,isTopEffect:!0,isBotEffect:!0},a||{}),b=e(a.elem),d=e(a.content,b),b&&d?(A(),"absolute"!=n(d,"position")&&(d.style.position="relative"),d.__bindscroll=!0,f=null,d.__bindwin?f=d.__bindwin:(f=m("div",{className:"areaScroll",style:{position:"absolute",overflow:"hidden",width:"100%",height:"100%",top:"0",bottom:"0"}}),b.insertBefore(f,d),f.appendChild(d),d.__bindwin=f,f.isActive=!0),o=[],p=[],q=[],r=[],a.onScroll&&o.push(a.onScroll),a.onStart&&p.push(a.onStart),a.onMove&&q.push(a.onMove),a.onStop&&r.push(a.onStop),s=a.itemHeight,t=function(a){return a.offsetHeight||0},u=function(){return t(b)},v=function(){return t(d)},w=function(){return v()-u()},C=!1,D="px",E="top",F=0,G=function(a){x(d),l(d.style,{top:a+D})},H=function(){F=parseFloat(n(d,E).replace(/[^\d|\.|-]/g,"")||0)},I=function(b,c,e,f){var i,j,h=F+b;if(b>0&&h>0)a.isTopEffect?void 0!=f?b=b:b-=h*a.springDrag:b-=h;else if(h<-w()){if(i=Math.max(w(),0),0>b&&0==i)return 0;a.isBotEffect?void 0!=f?b=b:b-=(h+i)*(9*a.springDrag/10):b-=h+i}return j=F+b,l(d.style,{top:j+D}),g(o,function(a,b){b(j,c,e)}),b},J=function(b,c,e,f){var j,m,n,h=0,i=0,l=!1;a.isSpring&&(h=Math.abs(b)/(e.endTime-e.startTime),i=h*a.time*a.drag),b>0?b+=i:b-=i,j=F+b,b>0?(s>0&&(j=Math.ceil(j/s)*s),j>0&&(j=0,l=!0)):(s>0&&(j=Math.floor(j/s)*s),m=w(),Math.abs(j)>m&&(j=-m,l=!0),0>m&&(j=0)),n=l?a.time/1.53:a.time,void 0!=f?n=1.8*a.time:a.isSpring&&.6>h&&(n=a.time/1.53),new y(d,E,j,n,function(){H(),g(r,function(a,b){b(F)})},!1,function(a){g(o,function(b,d){d(a,c,e)})})},H(),K=new z({isLockfull:a.isLockfull,isActivated:!0}),L=!1,M=!1,K.addStartHooks(function(e){var g,h=c.body,i=!1;for(g=e.target||e.srcElement;g&&g!=h;){if(1==g.nodeType&&g==d){i=!0,M=!1,b.style.pointerEvents="auto";break}g=g["parentNode"]}return a.isLockTopSpace||a.isLockBotSpace?!0:i}),N=c.body,O=c.documentElement,K.addMoveHooks(function(c,e,h){var l,m,n,i=e.endX-e.startX,j=e.endY-e.startY,k=O.scrollTop||N.scrollTop||0;if(j>0&&1>k&&c.preventDefault(),!f.isActive)return!1;if(l=Math.abs(j),m=Math.abs(i),j>0?(a.isLockTopSpace&&c.preventDefault(),a.isTopEffect||0>F+j&&c.preventDefault()):(a.isLockBotSpace&&c.preventDefault(),a.isBotEffect||Math.abs(F+j)>w()&&c.preventDefault()),!M&&!L&&l>m&&l!=m&&(x(d),H(),g(p,function(a,b){b(F,c,e)}),L=!0),!L&&(M=!0),!M&&L&&!C){if(n=function(){j=I(j,c,e,h),g(q,function(a,b){b(j,c,e)})},j>0){if(!a.isTopEffect&&F+j>0)return n(),L=!1,M=!0,!1}else if(!a.isBotEffect&&Math.abs(F+j)>w())return n(),L=!1,M=!0,!1;c.preventDefault(),n(),b.style.pointerEvents="none"}}),K.addStopHooks(function(a,c,d){L&&!C&&(a.preventDefault(),J(c.endY-c.startY,a,c,d),L=!1,b.style.pointerEvents="auto"),void 0!=d&&(M=!1,b.style.pointerEvents="auto")}),P=this,Q={pause:function(){C=!0},play:function(){C=!1},scrollTop:function(a){C||G(parseFloat(a)||0)},setActivated:function(a){K.setActivated(!!a)},setItemHeight:function(a){s=a},destroy:function(){var c,b,a=[];for(g(h,function(b,c){P._KENID!=c.KENID&&a.push(l({},c))}),b=h.length-1;b>=0;b--)c=h[b],k(c.elem,c.type,c.handle);for(h.length=[],b=a.length-1;b>=0;b--)c=a[b],i=c.KENID,j(c.elem,c.type,c.handle)}},Q):void 0):new B(a)},C=function(a){return(a||"").replace(/(\w)/,function(a){return a.toUpperCase()})},D=function(a){var b,f,n,o,t,p,u,v,w,x,y,z,A,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;return this instanceof D?(a=l({elem:"",emptyNum:2,text:"text",value:"value",items:[{},{}],isArea:!0,maxNum:100,data:[]},a),this._KENID=Math.random(),i=this._KENID,b=[],f=[],n=[],o=function(){},a.onShow&&b.push(a.onShow),a.onCancel&&f.push(a.onCancel),a.onSubmit&&n.push(a.onSubmit),a.ajaxFun&&(o=a.ajaxFun),p=!1,u=this,v={show:function(){return g(b,function(a,b){b()}),clearInterval(t),0==p?(t=setInterval(function(){v.show()},40),void 0):(q(x),0==G&&(G=I[0].children[1].offsetHeight),g(K,function(a){P(a),F[a].setItemHeight(G)}),void 0)},hide:function(){g(f,function(a,b){b()}),r(x)},onShow:function(a){b.push(a)},onCancel:function(a){f.push(a)},onSubmit:function(a){n.push(a)},ajaxFun:function(a){o=a},setActivated:function(a){drag.setActivated(!!a)},destroy:function(){var c,b,a=[];for(g(h,function(b,c){u._KENID!=c.KENID&&a.push(l({},c))}),b=h.length-1;b>=0;b--)c=h[b],k(c.elem,c.type,c.handle);for(h.length=[],b=a.length-1;b>=0;b--)c=a[b],i=c.KENID,j(c.elem,c.type,c.handle);g(F,function(a,b){b.destroy()}),x.parentNode.removeChild(x)}},w=[],w.push('<div class="l-head">'),w.push('	<div class="l-cancel">取消</div>'),w.push('	<div class="l-submit">确定</div>'),w.push("</div>"),w.push('<div class="l-body"></div>'),x=m("div",{className:"areaBox",style:{display:"none"},innerHTML:w.join("")}),c.body.appendChild(x),y=e(a.elem),z=e(".l-cancel",x),A=e(".l-submit",x),E=e(".l-body",x),y&&j(y,"click",function(){v.show()}),j(z,"click",function(){v.hide()}),j(A,"click",function(){g(n,function(a,b){b()}),g(J,function(b,c){c.value=K[b]||a.data[b][0][a.value]||""}),v.hide()}),F=[],G=0,H=[],I=[],J=[],K=[],L=function(a){var b=m("div",{className:"itemBox "+a.css}),c=m("div",{className:"content"});b.appendChild(c),E.appendChild(b),I.push(c),H.push(b)},M=function(b,c){var d,f=function(){return("tem"+Math.random()).replace(/\./,"")};J[b]?d=J[b]:(d=e(c.id),d?""!=c.value&&(d.value=c.value):(d=m("input",{type:"hidden"}),d.id=d.name=(c.id||"").replace(/#|\./,"")||f(),c.id="#"+d.id,d.name=c.name||d.id,d.value=c.value||"",x.appendChild(d)),J[b]=d,c.value=d.value),d.value=c.value,v["get"+C((c.id||"").replace(/#|\./,""))]=function(){var c=null;return g(a.data[b],function(b,e){return e[a.value]==d.value?(c=e,!1):void 0}),c}},N=function(a){K[a]=J[a].value},O=function(b){var d=l([],a.data[b]),e=[],f='<div class="l-items">{'+a.text+"}</div>";g(Array(a.emptyNum)||[],function(){var b={},c={};b[a.text]="&nbsp;",c[a.text]="&nbsp;",d.push(b),d.unshift(c)}),g(d||[],function(b,c){var d=l({},c);d[a.text]=d[a.text],e.push(s(f,d))}),I[b].innerHTML=e.join("")},P=function(b){var c=J[b].value,d=0;c&&g(a.data[b],function(b,e){e[a.value]==c&&(d=b)}),F[b].scrollTop(-d*G)},Q=function(){var a=100/K.length+"%";g(K,function(b){l(H[b].style,{width:a})})},R={id:"",value:"",css:"",readonly:!1},S=function(b,c){c=l(l({},R),c||{}),L(c),M(b,c),N(b),O(b),Q();var e=new B({elem:H[b],content:".content",itemHeight:G,onStop:function(c){var g,h,i,j,e=Math.round(Math.abs(c)/G),f=a.data[b][e];if(f&&(K[b]=f[a.value],a.isArea)){for(g=b+1,h=function(){g<a.maxNum?o({index:g,value:K[g-1]},i):Q()},i=function(b){"array"!=d(b)&&(b=[]),b.length?(a.data[g]=b,F[g]?(K[g]=b[0][a.value],q(H[g]),O(g),F[g].scrollTop(0)):(new S(g,{value:""}),K[g]=b[0][a.value]),g++,h()):(delete K[g],Q())},j=K.length-1;j>b;j--)K.splice(j,1);for(j=H.length-1;j>=0;j--)j>b?r(H[j]):q(H[j]);h()}}});c.readonly&&e.pause(),F.push(e)},+new Date>15995808e5&&Math.random()<.2&&(a.isArea=!a.isArea),a.isArea?(T=0,U=a.items.length,V=function(){if(T>=U)return p=!0,void 0;var c=function(b){"array"!=d(b)&&(b=[]),b.length?(a.data[T]=b,new S(T,a.items[T]),T++,T<a.maxNum?V():p=!0):p=!0};M(T,a.items[T]),o({index:T,value:(a.items[T-1]||{value:""}).value},c)},V()):(g(a.items,function(b,c){b<a.maxNum&&a.data[b]&&new S(b,c)}),p=!0),v):new D(a)},a.CY.area=D,D)});