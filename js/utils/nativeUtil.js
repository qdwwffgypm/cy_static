"use strict";!function(e,t){if("undefined"!=typeof module)require("../libs/browser"),module.exports=t(e);else if(t(e),"function"==typeof define&&(define.amd||define.cmd)){var i="//"+(/ppppoints.com/.test(document.domain)?"j.ppppoints.com":"j.changyoyo.com")+"/static/js/";requirejs.config({paths:{browser:i+"libs/browser"}}),define("nativeUtil",["browser"],function(){return t(e)})}}(window||void 0,function(e){if(!e.CY&&(e.CY={}),e.CY.nativeUtil)return e.CY.nativeUtil;var t=function(e){return Object.prototype.toString.call(e).split(/\s(\w+)/)[1].toLowerCase()},i={loadUrl:function(e){var t=document.createElement("iframe");t.setAttribute("src",e),t.setAttribute("style","display:none;"),document.body.appendChild(t),t.parentNode.removeChild(t),t=null},open:function(e,i,n,o){var r="native://"+e+"?action="+i;"function"==t(n)&&(o=n,n={}),n&&(r+="&data="+encodeURIComponent(JSON.stringify(n||{}))),o&&(r+="&callback="+o),this.loadUrl(r)},bridge:{check:function(t){if(e.WebViewJavascriptBridge)return t(e.WebViewJavascriptBridge);if(e.WVJBCallbacks)return e.WVJBCallbacks.push(t);e.WVJBCallbacks=[t];var i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout(function(){document.documentElement.removeChild(i)},0)},open:function(i,n,o){"function"==t(n)&&(o=n,n={}),this.check(function(){if(!e.WebViewJavascriptBridge)return alert("您的APP版本过低，请升级APP。"),!1;e.WebViewJavascriptBridge.callHandler("jsCallNative",{action:i,params:n||{}},function(e){o&&o(e)})})}},open_v1:function(i){if(!e.CY.browser.jfmore)return!1;var n=this,o="json"+(Math.random()+"").substr(2);e[o]=function(t){i.callback&&i.callback(t),delete e[o]};var r,a,s,c,l=i.ios||{},d=i.android||{};return e.CY.browser.ios?(r="boolean"==t(l.isVebView)&&l.isVebView,a=l.host||i.host,s=l.action||i.action,c=l.data||i.data):(r="boolean"!=t(d.isVebView)||d.isVebView,a=d.host||i.host,s=d.action||i.action,c=d.data||i.data),r?n.open(a||"user",s,c,o):n.bridge.open(s,c,e[o]),!0},closeWebview:function(e){return this.open_v1(e||{action:"closewebview",ios:{isVebView:!0}})},goBack:function(){e.CY.browser.jfmore?this.closeWebview():history.back()},goHome:function(t){e.CY.browser.jfmore?this.closeWebview():spm.refresh(t||"/jfmall/index.htm")}};return e.CY.nativeUtil=i,i});