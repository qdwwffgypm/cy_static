!function(a,b){if("undefined"!=typeof module)require("./offset"),module.exports=b(a);else if(b(a),"function"==typeof define&&(define.amd||define.cmd)){var c="//"+(/ppppoints.com/.test(document.domain)?"j.ppppoints.com":"j.changyoyo.com")+"/static/js/";requirejs.config({paths:{offset:c+"libs/offset"}}),define("dragClone",["offset"],function(){return b(a)})}}(window||this,function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return!a.CY&&(a.CY={}),a.CY.dragClone?a.CY.dragClone:(b=document,c=b.body,d=CY.offset,e=function(a,c){return a=b.createElement(a),k(a.style,c||{}),a},f=function(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},g={has:function(a,b){return f(b,(a.className||"").split(/\s+/))>-1},add:function(a,b){!this.has(a,b)&&(a.className+=(a.className?" ":"")+b)},remove:function(a,b){var c=[];p((a.className||"").split(/\s+/),function(a,d){d!=b&&c.push(d)}),a.className=c.join(" ")}},h=function(a,b){return a&&a instanceof Object?a:a?(b||document).querySelector(a):null},i=function(a){return Object.prototype.toString.call(a).split(/\s(\w+)/)[1].toLowerCase()},j=function(a,b,c){p("array"!=i(a)?[a]:a,function(a,d){b.split(" ").forEach(function(a){d.addEventListener(a,c,!1)})})},k=function(a,b){for(var c in b)b.hasOwnProperty(c)&&("object"!=i(b[c])?void 0!=b[c]&&(a[c]=b[c]):a[c]=k(a[c]||{},b[c]));return a},l=function(a){k(a.style,{display:"block"})},m=function(a){k(a.style,{display:"none"})},n=function(a){return a.offsetWidth},o=function(a){return a.offsetHeight},p=function(a,b){a=a||[];for(var c=0,d=a.length;d>c&&0!=b.call(a[c],c,a[c]);c++);},q=function(a,b){var d=[];return b=h(b),b&&p(b.querySelectorAll("div")||[],function(b,c){(c.className||"").split(/\s+/).forEach(function(b){b==a&&d.push(c)})}),d},r=function(a,b,d){for(var e=null,f=!1,g=!1,h=d.target||d.srcElement;h&&h!=c&&!f;)1==h.nodeType&&(h.className||"").split(/\s+/).forEach(function(b){b==a&&(e=h),"cancelBubble"==b&&(g=!0)}),f||h!=b||(f=!0),h=h["parentNode"];return f&&!g?e:null},b.onselectstart=new Function("event.returnValue=false;"),s=function(a){var i,t,u,v,w,x,y,z,A,B,C,E,F,G,H,I,J,K,L,M,N,f=this;return f instanceof s?(i=[],t=[],u=[],v=[],w=[],a=k({menuLayout:"",menuItem:"",pageLayout:"",dashedCss:"",currCss:"cy_curr",dragLeftCss:"cy_drag_left_item",dragRightCss:"cy_drag_right_item"},a),x=h(a.menuLayout),y=h(a.pageLayout),B=n(x),C="px",E=!1,F=null,G=0,H=0,I=0,J=e("div",{border:"1px dashed #ccc"}),K=null,L=!1,M=null,N=null,j(b,"mousedown",function(b){var c,e,f,h,i;K=null,h=b.pageX,i=b.pageY,M=h,N=i,e=r(a.menuItem,x,b),f=r(a.menuItem,y,b),(e||f)&&(e&&(K=!0,F=e.cloneNode(!0),g.add(F,a.dragLeftCss),g.remove(F,a.dragRightCss)),f&&(K=!1,F=f,g.add(F,a.dragRightCss),g.remove(F,a.dragLeftCss)),E=!0,c=e||f,b.preventDefault(),z=q(a.menuItem,x),A=q(a.menuItem,y),G=i-d(c).top,H=h-d(c).left,I=n(c),currItem_height=o(c),L=!1)}),j(b,"mousemove",function(a){var g,h,b=a.pageX,e=a.pageY;if(E&&F){for(g=0;g<t.length;g++)if(0==t[g].call(f,F,K,J,z,A))return;k(F.style,{position:"absolute",top:e-G+C,left:b-H+C}),(K?I+(b-H)>B:b>H)?(y.appendChild(J),A[0]&&(h=A[A.length-1],e>d(h).top+o(h)?y.appendChild(J):p(A,function(a,b){b!=F&&e>d(b).top&&e<d(b).top+o(b)&&y.insertBefore(J,b)})),k(J.style,{border:"1px dashed #ccc",minHeight:currItem_height+C}),l(J),K||M!=b||N!=e||k(J.style,{border:"none"})):m(J),L||(k(F.style,{zIndex:10,width:I+C,minHeight:currItem_height+C}),c.appendChild(F)),(M!=b||N!=e)&&(L=!0)}}),j(b,"mouseup blur onmouseout",function(){var d,e;E&&F&&(L?(g.remove(F,a.dragRightCss),g.remove(F,a.dragLeftCss),y.insertBefore(F,J),k(F.style,{position:"static",width:"",height:""}),"block"==J.style.display?(c.appendChild(J),m(J),p(u,function(){this.call(f,F,K,J,z,A)})):F&&(d=!0,p(w,function(){d=this.call(f,F,!1,J,z,A)!==!1}),1==d&&F.parentNode.removeChild(F))):(e=g.has(F,a.currCss),p(A,function(b,c){g.remove(c,a.currCss),g.remove(c,a.dragLeftCss),g.remove(c,a.dragRightCss)}),!e&&g.add(F,a.currCss),p(v,function(){this.call(f,F,!1,J,z,A)}))),F&&F.parentNode==c&&(k(F.style,{position:"static",width:"",height:""}),m(J),y.insertBefore(F,J)),F=null,E=!1,L=!1}),{addStartHooks:function(a){i.push(a)},addMoveHooks:function(a){t.push(a)},addStopHooks:function(a){u.push(a)},addClickPageItem:function(a){v.push(a)},addRemovePageItem:function(a){w.push(a)}}):new s(a)},a.CY.dragClone=s,s)});