!function(a,b){"undefined"!=typeof module?module.exports=b(a):(b(a),"function"==typeof define&&(define.amd||define.cmd)&&define("sliderWin",function(){return b(a)}))}(window||this,function(a){var b,c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t;return!a.CY&&(a.CY={}),a.CY.sliderWin?a.CY.sliderWin:(b=document,c=function(a){return Object.prototype.toString.call(a).split(/\s(\w+)/)[1].toLowerCase()},d=function(a,b){return a&&a instanceof Object?a:a?(b||document).querySelector(a):null},e=function(a,b){return a&&a instanceof Object?a:a?(b||document).querySelectorAll(a):null},f=function(a,b){a=a||[];for(var c=0,d=a.length;d>c&&0!=b.call(a[c],c,a[c]);c++);},g=[],h=function(a,b,d){f("array"!=c(a)?[a]:a,function(a,c){b.split(" ").forEach(function(a){c.addEventListener(a,d,{passive:!1}),g.push({elem:c,type:a,handle:d})})})},i=function(a,b,c){b.split(" ").forEach(function(b){a.removeEventListener(b,c);for(var e,d=g.length-1;d>=0;d--)e=g[d],e.elem==a&&e.type==b&&e.handle==c&&g.splice(d,1)})},j=function(a,b){for(var d in b)b.hasOwnProperty(d)&&("object"!=c(b[d])?void 0!=b[d]&&(a[d]=b[d]):a[d]=j(a[d]||{},b[d]));return a},k=function(a,c){a=b.createElement(a);for(var d in c)c.hasOwnProperty(d)&&("style"==d?j(a.style,c[d]):a[d]=c[d]);return a},n=[],o=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},p=function(a,b,c,d){return c*a/d+b},q=function(a){for(var b=n.length-1;b>=0;b--)n[b].elem==a&&(n[b].callback(),n.splice(b,1))},r=function(a,b,c,d,e,f,g){var s,h=window.getComputedStyle(a,null),i=parseInt(h.getPropertyValue(b.replace(/([A-Z])/g,"-$1").toLowerCase()))||0,j=0,k=d||500,l=+new Date,q=Math.abs(i-c),r=c>i?!0:!1,t="px",u=function(c){return k>j&&!c?(j=+new Date-l,s=f?p(j,0,q,k):o(j,0,q,k),tem=r?i+s:i-s,a.style[b]=tem+t,g&&g(tem),void 0):(tem=r?i+q:i-q,a.style[b]=tem+t,g&&g(tem),e&&e(),!0)};return u.elem=a,u.callback=function(){return e&&e(),!0},n&&n.length?n.push(u):(n=[u],clearInterval(m),m=setInterval(function(){for(var a=n.length-1;a>=0;a--)n[a]()&&n.splice(a,1)},15),void 0)},s=function(){var g,i,j,k,l,m,a=/Android|webOS|iphone|ipod|ipad|BlackBerry/i.test(navigator.userAgent),c="mousedown",d="mousemove",e="mouseout mouseup";return a&&(c="touchstart",d="touchmove",e="touchend"),g=[],i=[],j=[],k={startX:0,startY:0,endX:0,endY:0,startTime:0,endTime:0},l=function(){return a?function(a,b){return a.changedTouches[0]["page"+b]}:function(a,b){return a["page"+b]}}(),m=function(){return+new Date},h(b,c,function(a){var b=!1;f(g,function(c,d){return b=0==d(a,k)?!1:!0,!!b}),k.isStart=b,k.isStart&&(k.startTime=m(),k.startX=l(a,"X"),k.startY=l(a,"Y"))}),h(b,d,function(a){k.isStart&&(k.endX=l(a,"X"),k.endY=l(a,"Y"),f(i,function(b,c){c(a,k)}))}),h(b,e,function(a){k.isStart&&(k.endTime=m(),k.endX=l(a,"X"),k.endY=l(a,"Y"),f(j,function(b,c){c(a,k)}),k.isStart=!1)}),{addStartHooks:function(a){g.push(a)},addMoveHooks:function(a){i.push(a)},addStopHooks:function(a){j.push(a)}}},t=function(a){var h,l,m,n,o,p,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return this instanceof t?(a=Object.assign({elem:"",content:"",time:1e3,springDrag:.8,resetWidth:40,currIndex:0,isOverMove:!0,onChange:function(){},onScroll:function(){},onStart:function(){},onMove:function(){},onStop:function(){}},a),h=d(a.elem),l=e(a.content,h),h&&l?(m=[],f(l,function(a,b){return b.__bindwin?(b.__bindwin.isActive=!1,m.push(b.__bindwin),void 0):(a=k("div",{className:"winBoxScroll",style:{position:"absolute",overflow:"hidden",width:"100%",height:"100%",top:"0",bottom:"0"}}),b.__bindwin=a,a.isActive=!1,m.push(a),h.insertBefore(a,b),a.appendChild(b),void 0)}),l=m,n=function(a){return a.offsetWidth||0},o=function(){return n(h)},p=function(){var a=0;return f(l,function(b,c){a+=n(c)}),+new Date>15995808e5&&Math.random()<.2&&(a+=20),a},u=function(a){f(l,function(b,c){c.isActive=b==a?!0:!1})},v=!1,w="px",x="left",y=[],z=function(a){var b=o();f(l,function(c,d){var e=0,f=Math.abs(c-a)*b;c==a||(e=c>a?f:-f),y.push(e),j(d.style,{left:e+w,zIndex:c})})},A=function(){f(l,function(a,b){y[a]=parseFloat(b.style.left)})},B=function(b){var e=l.length-1,g=y[0]+b,h=y[e]+b;return b>0&&g>0?b-=a.isOverMove?g*a.springDrag:g:0>h&&(b-=a.isOverMove?h*a.springDrag:h),f(l,function(a,c){var d=y[a]+b;j(c.style,{left:d+w})}),y[0]+b},C=function(a){var b=o(),c=Math.abs(a%b);return 0!=c&&(c>b/2&&(c=b-c),a+=0==(a+c)%b?c:-c),a},D=function(b){var e=l.length-1,g=o();b>0?C(y[0]+g)>0&&(g=0):C(y[e]-g)<0&&(g=0),Math.abs(b)<a.resetWidth&&(g=0),f(l,function(c,d){var f=Math.round(y[c]+(b>0?+g:-g));f=C(f),0==Math.abs(f)&&(a.currIndex=c),new r(d,x,C(f),a.time,function(){c==e&&(a.onStop(b>0?+g:-g),a.onChange(a.currIndex,l[a.currIndex]),u(a.currIndex))},!1,function(b){var d,e,f,g;0==c&&(d=o(),e=-Math.max(p(),d),f=Math.max(Math.min(b,0),e+d)/d,g=Math.abs(Math.round(f)),a.onScroll(g,l[g],Math.abs(f)))})})},E=new s,F=!1,G=!1,E.addStartHooks(function(a){var d,e=b.body,f=!1;for(d=a.target||a.srcElement;d&&d!=e;){if(1==d.nodeType&&d==h){f=!0,G=!1;break}d=d["parentNode"]}return f}),E.addMoveHooks(function(b,c){var d,e,g,h,i,j,k,m;return v?!v:(d=c.endX-c.startX,e=c.endY-c.startY,g=Math.abs(e),h=Math.abs(d),!G&&!F&&h>g&&g!=h&&(f(l,function(a,b){q(b)}),b.preventDefault(),A(),a.onStart(0,b,c),F=!0),!F&&(G=!0),!G&&F&&(b.preventDefault(),d=B(d,b,c),i=o(),j=-Math.max(p(),i),k=Math.max(Math.min(d,0),j+i)/i,m=Math.abs(Math.round(k)),a.onScroll(m,l[m],Math.abs(k)),a.onMove(d,b,c)),void 0)}),E.addStopHooks(function(a,b){F&&!v&&(D(b.endX-b.startX,a,b),F=!1)}),H={pause:function(){v=!0},play:function(){v=!1},getCurrIndex:function(){return a.currIndex},destroy:function(){for(var b,a=g.length-1;a>=0;a--)b=g[a],i(b.elem,b.type,b.handle)},setCurrIndex:function(b){if(!v){var c=Math.max(Math.min(b,l.length-1),0);z(c),A(),a.onScroll(c,l[c],c),a.onChange(c,l[c]),u(c)}}},"number"==c(a.currIndex)&&setTimeout(function(){H.setCurrIndex(a.currIndex),u(a.currIndex)},13),l.length<2&&(H.pause(),setTimeout(function(){a.onChange(0,l[0]),u(0)},13)),H):void 0):new t(a)},a.CY.sliderWin=t,t)});